# タスク実行ルール

## 基本原則

### 一つずつ実行
- **重要**: 一度に一つのタスクのみ実行する
- タスク完了後は必ずユーザーレビューを待つ
- 自動的に次のタスクに進まない

### 要件ベース実装
- 仕様書の要件（requirements.md）を必ず確認
- 設計書（design.md）に従った実装
- タスクリスト（tasks.md）の詳細に従う

### 実装前の確認事項
1. 現在のプロジェクト状態を把握
2. 関連する既存コードを確認
3. 依存関係や影響範囲を検討
4. 必要な型定義や設定を確認

## コード実装ガイドライン

### TypeScript
- 厳密な型定義を使用
- `any` 型は避ける
- インターフェースと型エイリアスを適切に使い分け
- ジェネリクスを活用

### React コンポーネント
- 関数コンポーネントを使用
- Props の型定義を必須
- カスタムフックの活用
- メモ化（useMemo, useCallback）の適切な使用

### ファイル構成
- 機能ごとにディレクトリを分割
- 共通コンポーネントは `src/components/ui/`
- ビジネスロジックは `src/lib/`
- 型定義は `src/types/`

### エラーハンドリング
- try-catch文の適切な使用
- ユーザーフレンドリーなエラーメッセージ
- ログ出力の実装

## Firebase統合ルール

### 設定
- 環境変数での設定管理
- 設定値の型安全性確保
- 初期化処理の適切な実装

### 認証
- Firebase Auth の適切な使用
- 認証状態の管理
- 保護されたルートの実装

### データベース
- Firestore の型安全な使用
- セキュリティルールの考慮
- リアルタイム更新の実装

## UI実装ルール

### shadcn/ui使用
- 既存コンポーネントの活用
- カスタマイズが必要な場合の適切な拡張
- 一貫したデザインシステム

### Tailwind CSS
- v4の新形式に従う
- CSS変数の活用
- レスポンシブデザイン対応

### アクセシビリティ
- セマンティックHTML
- キーボードナビゲーション
- スクリーンリーダー対応

## テスト実装

### 単体テスト
- 重要な関数のテスト
- コンポーネントのテスト
- モックの適切な使用

### 統合テスト
- Firebase連携のテスト
- ユーザーフローのテスト

## 完了基準

### 実装完了の条件
1. 要件を満たす機能実装
2. 型エラーなし
3. ESLintエラーなし
4. 基本的な動作確認
5. 適切なエラーハンドリング

### ドキュメント更新
- 必要に応じてREADME更新
- コメントの追加
- 型定義の更新

## レビュー観点

### コード品質
- 可読性
- 保守性
- パフォーマンス
- セキュリティ

### 機能性
- 要件との適合性
- エラーケースの対応
- ユーザビリティ